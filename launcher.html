<html>
<head>
	<title> Weather Launcher </title>
</head>
<body>
	<button onclick="requestSession()">Click me</button>
			
	<script type="text/javascript" src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"></script>

	<script language="javascript">

		window['__onGCastApiAvailable'] = function(loaded, errorInfo) {
		  if (loaded) {
		    initializeCastApi();
		  } else {
		    console.log(errorInfo);
		  }
		}


		initializeCastApi = function() {
		  var sessionRequest = new chrome.cast.SessionRequest('9835D2DE');
		  var apiConfig = new chrome.cast.ApiConfig(sessionRequest,
		    sessionListener,
		    receiverListener);
		  chrome.cast.initialize(apiConfig, onInitSuccess, onError);
		};

		sessionListener = function() {};
		receiverListener = function(e) {
			if (e === chrome.cast.ReceiverAvailability.AVAILABLE) {
			}
		};

		onInitSuccess = function() {
			console.log("success!");

		};

		onError = function() { 
			console.log("failure!!");
		};

		onRequestSessionSuccess = function(e) {
			session = e;
			console.log(session.displayName);
		};
		onLaunchError = function() {};


		function requestSession()
		{
			chrome.cast.requestSession(onRequestSessionSuccess, onLaunchError)
		}

	</script>


</body>
</html>
